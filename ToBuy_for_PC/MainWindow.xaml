<Window x:Class="ToBuy_for_PC.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewModel="clr-namespace:ToBuy_for_PC.ViewModel"
        d:DataContext="{d:DesignInstance viewModel:MainWindowViewModel}"
        mc:Ignorable="d"
        Title="MainWindow" Height="800" Width="600">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="0.8*"/>
            <RowDefinition Height="0.4*"/>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="0.1*"/>
            <RowDefinition Height="0.8*"/>
        </Grid.RowDefinitions>

        <!--Title area-->
        <Grid Row="0">
            <Label Name="TitleLable" 
                   Content="To Buy"
                   FontSize="40"
                   HorizontalAlignment="Left"
                   Padding="20,25,0,0"
                   VerticalAlignment="Center"/>
        </Grid>

        <!--Enter Item Area: press Enter to add Item to list-->
        <Grid Row="1">
            <TextBox Name="ItemTextbox"
                     FontSize="30"
                     FontWeight="UltraLight"
                     FontStyle="Italic"
                     Foreground="Gray"
                     BorderThickness="0"
                     Padding="20,15,0,0"
                     Background="LightGray"
                     VerticalAlignment="Center"
                     HorizontalContentAlignment="Left"
                     GotFocus="TextBox_GotFocus"
                     LostFocus="TextBox_OnLostFocus"
                     Text="{Binding WantBuy,UpdateSourceTrigger=PropertyChanged}" Height="76" Margin="0,0,-0.4,0">
                <TextBox.InputBindings>
                    <KeyBinding Command="{Binding AddCommand}" Key="Enter"/>
                </TextBox.InputBindings>
            </TextBox>
        </Grid>

     
        <Grid Row="2">
            <DataGrid x:Name="ListDataGrid"
                      HeadersVisibility="None"
                      ItemsSource="{Binding ToBuys, UpdateSourceTrigger=PropertyChanged}"
                      SelectedItem="{Binding SelectedToBuy, UpdateSourceTrigger=PropertyChanged}"
                      CanUserAddRows="False"
                      HorizontalAlignment="Left"
                      ColumnWidth="*"
                      AutoGenerateColumns="False"
                      RowHeight="50"
                      FontSize="20"
                      VerticalGridLinesBrush="White"
                      HorizontalGridLinesBrush="LightGray"
                      Background="White"
                      IsReadOnly="True">
              
                <DataGrid.Columns>
                    <!--item:IsDone-->
                    <DataGridCheckBoxColumn Binding="{Binding IsDone, UpdateSourceTrigger=PropertyChanged}" Width="0.2*">
                        <DataGridCheckBoxColumn.ElementStyle>
                            <Style TargetType="CheckBox">
                                <Setter Property="Width" Value="20"/>
                                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                <Setter Property="VerticalContentAlignment" Value="Center"/>
                                <Setter Property="LayoutTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="2" ScaleY="2"/>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridCheckBoxColumn.ElementStyle>
                    </DataGridCheckBoxColumn>

                    <!--item:Name-->
                    <DataGridTextColumn Binding="{Binding Name}" IsReadOnly="True">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="{x:Type TextBlock}" >
                                <Style.Triggers >
                                    <DataTrigger Binding="{Binding SelectedToBuy.IsDone}" Value="true">
                                        <Setter Property="TextDecorations" Value="Strikethrough"/>
                                    </DataTrigger>
                                </Style.Triggers>

                                <Setter Property="Padding" Value="20"/>
                                <Setter Property="HorizontalAlignment" Value="Left"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>

                            </Style>

                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <!--item:IsDone-->
                    <DataGridTemplateColumn Width="0.1*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button x:Name="RemoveItemButton"
                                        Content="X"
                                        FontWeight="Light"
                                        Width="55"
                                        Padding="15,0,0,0"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        HorizontalAlignment="Right"
                                        ClickMode="Press"
                                        Command="{Binding Path=DataContext.RemoveSelectedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <!--button Area: click to clear all items-->
        <Grid Row="4">
            <Button x:Name="ClearButton"
                    FontSize="30"
                    FontWeight="ExtraLight"
                    Height="70"
                    Width="300"
                    Content="c l e a r"
                    Command="{Binding ClearCommand}"/>

            <!--test: 点按增加删除线，在纯TextBlock里面可以实现，在DataGrid里面不能实现-->
            <!--<TextBlock Text="{Binding SelectedToBuy.Name}" >
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedToBuy.IsDone}"
                                         Value="True">
                                <Setter Property="TextDecorations" Value="Strikethrough"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>-->
        </Grid>

    </Grid>
</Window>
